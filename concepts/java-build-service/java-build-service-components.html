<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java build service components :: HACBS Documentation</title>
    <link rel="canonical" href="http://localhost:8080/concepts/java-build-service/java-build-service-components.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/main.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="http://localhost:8080">HACBS Documentation</a>

      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
              <div class="button"><a href="https://gitlab.cee.redhat.com/red-hat-hybrid-application-cloud-build-services-documentation/hacbs-documentation/-/issues/new" target="_blank">Raise an issue</a></div>
        <div class="navbar-item search hide-for-print">
          <div id="search-field" class="field">
            <input id="search-input" type="text" placeholder="Search the docs">
            <label class="filter checkbox">
              <input type="checkbox" data-facet-filter="component:ROOT"> In this project
            </label>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">ROOT</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../getting-started/index.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/build_service.html">Pipeline customization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/pipeline_visualization.html">Pipeline visualization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../how-to-guides/index.html">How-to guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../how-to-guides/delete_application.html">Deleting an application from UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../how-to-guides/proc_creating_static_environment.html">Creating a static environment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../cli/index.html">CLI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/proc_release_application.html">Releasing an application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/proc_managed_services_onboarding.html">Managed services team onboarding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/delete_application.html">Deleting an application from CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/proc_enabled_java_dependencies.html">Configuring Java builds with enabled dependencies rebuild</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/proc_disabled_java_dependencies.html">Configuring Java builds with disabled dependencies rebuild</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../cli/creating_a_custom_application_test_with_test_pipelines.html">Creating a custom application test with test pipelines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release-services/con_release-services-overview.html">Release Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enterprise-contract/con_enterprise-contract-overview.html">Enterprise Contract</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../testing_applications/index.html">Testing Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../testing_applications/sanity_tests.html">Sanity Tests</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../testing_applications/adding_new_tests.html">Add a New Test</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../testing_applications/configuring_tests.html">Configuring Tests</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../pipelines/index.html">Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pipelines/persister.html">Persister component</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../pipelines/pipeline_concepts.html">Pipeline concepts</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../environments/index.html">Environments</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="java-build-service.html">Java build service</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="java-build-service-components.html">Java build service components</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary/index.html">Glossary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../contribute/index.html">Contribute to documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../raise-issue/index.html">Raise an issue</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../support/index.html">Support</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ROOT</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../ec-cli/main/index.html">Enterprise Contract CLI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ec-cli/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ec-policies/index.html">Enterprise Contract Policies</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ec-policies/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">ROOT</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">ROOT</a></li>
    <li><a href="../index.html">Concepts</a></li>
    <li><a href="java-build-service-components.html">Java build service components</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/gtrivedi/git/HACBS/stonesoup-documentation/modules/ROOT/pages/concepts/java-build-service/java-build-service-components.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Java build service components</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_dependency_analyzer">1. Dependency analyzer</a></li>
<li><a href="#_build_database">2. Build database</a></li>
<li><a href="#_cache">3. Cache</a></li>
<li><a href="#_troubleshooting">4. Troubleshooting</a></li>
<li><a href="#_references">5. References</a>
<ul class="sectlevel2">
<li><a href="#_build_info_and_scm_info_directories">5.1. <code>/build-info</code> and <code>/scm-info</code> directories</a></li>
</ul>
</li>
<li><a href="#_additional_resources">6. Additional resources</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Dependency Analyzer</p>
</li>
<li>
<p>Build Database</p>
</li>
<li>
<p>Cache</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependency_analyzer"><a class="anchor" href="#_dependency_analyzer"></a>1. Dependency analyzer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dependency Analyzer is responsible for determining all the dependencies in a Java application. The Dependency Analyzer task analyzes the completed application to find theh dependencies in the final application. It then creates the <strong>ArtifactBuild</strong> objects that tell the system to try to rebuild any dependencies from 3rd party repositories.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build_database"><a class="anchor" href="#_build_database"></a>2. Build database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Build Database consists of one or more <code>.git</code> repositories containing information about how to build projects, for example, SCM locations and build parameters. The system stores all this information in the <code>./build-info</code> and <code>./scm-info</code> directories.</p>
</div>
<div class="paragraph">
<p>In addition, you can configure your own build database by adding the following data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
 name: jvm-build-config
 namespace: test-jvm-namespace
data:
 registry.owner: OrgID <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The organization ID.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cache"><a class="anchor" href="#_cache"></a>3. Cache</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the caching service to improve the performance. The cache is a Quarkus application and is configured via standard Quarkus configuration keys. That means any config key listed here can be overridden by both system properties, or by environment variables.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>4. Troubleshooting</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Issue: Missing artifact build</strong></p>
<div class="paragraph">
<p>Resolution Identify the source from where the system is building the application. When identified, if missing, add the source URL and tags to the <code>scm.yaml</code> file:</p>
</div>
<div class="paragraph">
<p><strong>Example <code>scm.yaml</code> file</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">type: "git"
uri: "https://gitlab.ow2.org/asm/asm.git"
tagMapping:
 - pattern: (\d+)\.(\d+)
   tag: ASM_$1_$2
 - pattern: (\d+)\.(\d+)\.(\d+)
   tag: ASM_$1_$2_$3</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Issue: Dependencies failed to rebuild</strong></p>
<div class="paragraph">
<p>Resolution: You can resolve this error by adding additional build arguments or by following the trial and error route.</p>
</div>
<div class="paragraph">
<p><strong>Example additional build arguments</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">additionalArgs:
 - "-DskipDocs=true"
 - "-Dno-test-modules"</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>5. References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_build_info_and_scm_info_directories"><a class="anchor" href="#_build_info_and_scm_info_directories"></a>5.1. <code>/build-info</code> and <code>/scm-info</code> directories</h3>
<div class="paragraph">
<p>The <code>./build-info</code> and <code>./scm-info</code> directories consist of all the build information. The layout of this directory is based on the group id of the ArtifactBuild. For example, in the case of an ArtifactBuild with the group id of com.acme, you must store its information in the <strong>/build-info/com/acme</strong> folder.</p>
</div>
<div class="paragraph">
<p>Within this group id directory, you can store more specific information that is only applied to a specific artifact, version, or combination of artifact + version. You can store these types of information by using the <strong>_artifact</strong> and <strong>_version</strong> folders.</p>
</div>
<div class="paragraph">
<p>When you use both <strong>_artifact</strong> and <strong>_version</strong> folders, the <strong>_artifact</strong> folder takes precedence over the <strong>_version</strong> folder.</p>
</div>
<div class="paragraph">
<p><strong>Example</strong>
If you have an artifact com.acme.gizmo:gizmo-core:1.0.0.Final you can place the files relevant to this artifact at different locations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>/build-info/com/acme/gizo</strong> - Applied to every artifact with the group id com.acme.gizmo. This is the most common layout and most of the artifacts with a given group id come from the same directory</p>
</li>
<li>
<p><strong>/build-info/com/acme/gizo/_artifact/gizmo-core</strong> - Provides information about a specific artifact. This is helpful when lots of different repositories build artifacts with the same group id</p>
</li>
<li>
<p><strong>/build-info/com/acme/gizo/_artifact/gizmo-core/_version/1.0.0.Final</strong> - Contains information about a specific version of a specific artifact</p>
</li>
<li>
<p><strong>/build-info/com/acme/gizo/_version/1.0.0.Final</strong> - Contains information about a specific version of a specific group id</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>6. Additional resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information, see <a href="java-build-service.html" class="xref page">Java build service</a>.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer" style="text-align: center;">
    <a href="https://gitlab.cee.redhat.com/red-hat-stone-soup/stonesoup-documentation/-/blob/main/modules/ROOT/pages">Source documents on GitLab</a>
    | <a href="https://docs.engineering.redhat.com/pages/viewpage.action?pageId=256849149">Engage with us!</a>
    | <a href="link:https://groups.google.com/g/stonesoup">Contact us on Google Chat</a>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
